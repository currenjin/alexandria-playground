# ADR001. Monolithic to Microservices

## Context
- 현 시점으로 내가 경험하고 있는 서비스(루티 프로)는 마이크로서비스로 전환하기에 적합한가?
  - 현재 서비스는 마이크로서비스로 전환하기에 적합하지 않다.
  - 가장 큰 원인으로는, 관리하는 사람이 절대적으로 적다.
  - 총 7명이 해당 서비스에 집중하고 있으며, 백엔드 개발자 2명, 프론트엔드 개발자 2명이다.
  - 각 서비스로 쪼갠다면 이 서비스를 관리하기에는 리소스가 턱없이 부족하다.
- 일부만 전환해야 한다면, 어떤 것을 먼저 전환해야 할까?
  - 그럼에도 필요에 의해 일부를 분리할 수 있을 것이다. 첫 번째 대상으로는 엑셀 서비스가 될 것이다.
  - 엑셀 서비스는 대량의 데이터를 수용할 수 있어야 하며, 적지 않은 수의 스레드를 점유한다.
  - 또한, 후속 처리가 필요한 이벤트가 있기에 한 번 엑셀이 업로드되면, 다른 유저에게 지연이 발생하게 될 것이다.
  - 이를 해결하기 위해서 해당 서비스를 분리해 트래픽을 분산할 수 있다.

## Decision
- 엑셀 서비스를 분리한다.
- 템플릿과 관련 라이브러리는 엑셀 서비스로 옮긴다.

## Consequences
- API Endpoint 변경이 필요하다.
  - Strangler Fig: 점진적 마이그레이션을 위해 처음엔 API Endpoint는 유지하고, 기존 서비스 내에서 엑셀 서비스를 호출하는 방식 적용한다. 
- 배포 및 부하 독립성을 확보한다.
- 기존 디비는 유지하고, 엑셀 서비스에서 해당 디비를 접근하도록 한다.
  - 추후 이벤트 기반 통신으로 변경하면, 각 데이터를 이벤트로 전송한다.