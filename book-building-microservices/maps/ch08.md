# Ch08. 배포

## TL;DR
- 고장 나지 않았다면, 고치지 말라.
- 만족한다고 느끼는 만큼 통제권을 포기한 다음 조금씩 더 포기하라. PaaS에 맡길 수 있다면, 그렇게 하라. 설정을 일일이 손봐야 하는 것이 아니다.
- 마이크로서비스를 컨테이너화하는 일이 쉽지는 않지만, 격리 비용에 대한 절충안임은 분명하다. 제어권을 제공하면서, 로컬 개발에 이점을 가져온다.

## Key Ideas
### 배포 원칙
- 격리 실행: 다른 마이크로서비스 인스턴스에 영향을 미치지 않도록 실행돼야 한다. (ex. Lambda, Heroku)
- 자동화 집중: 고수준의 자동화를 가능하게 할 기술을 선택하는 데 집중하고 문화의 핵심 부분으로 채택하라. (ex. REA, Financial Times)
- 코드형 인프라스트럭쳐: 자동화하고, 정보 공유를 촉진하는 인프라스트럭처 구성을 기술하라. (Chef, Ansible, Terraform, AWS CDK)
- 무중단 배포: 독립적인 배포를 통해 사용자에게 다운타임 없이 새 버전을 배포할 수 있어야 한다. (Rolling upgrade, Blue/Green)
- 기대 상태 관리: 장애가 발생하거나 트래픽이 증가할 때 필요하다면 지정된 상태의 새로운 인스턴스를 시작한다. (AWS Auto Scaling, GitOps)

### 배포 방법
- 물리 머신: 마이크로서비스 인스턴스는 가상화 없이 물리 머신에 직접 배포된다.
- 가상 머신: 마이크로서비스 인스턴스는 가상 머신에 배포된다.
- 컨테이너: 마이크로서비스 인스턴스는 가상 또는 물리 머신에서 격리된 컨테이너로 실행된다.
- 애플리케이션 컨테이너: 마이크로서비스 인스턴스는 다른 애플리케이션 인스턴스들을 관리하는 애플리케이션 컨테이너 안에서 실행된다.
- PaaS: 마이크로서비스 인스턴스를 배포하는 데 한층 고도화된 추상화 플랫폼이 사용된다. (ex. Heroku, AWS Elastic Beanstalk, Google App Engine)
- FaaS: 마이크로서비스 인스턴스는 하부 플랫폼에서 실행된다. (ex. AWS Lambda, Azure Functions)

## Open Questions
