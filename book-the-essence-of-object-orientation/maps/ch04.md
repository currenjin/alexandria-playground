# Ch04. 역할, 책임, 협력

## TL;DR
- 객체지향 설계의 핵심은 **역할, 책임, 협력**이다.
- **협력**은 애플리케이션의 기능을 구현하기 위한 객체들의 상호작용이다.
- **책임**은 협력에 참여하기 위해 객체가 수행해야 하는 행동이다.
- **역할**은 협력 내에서 대체 가능한 책임의 집합이다.

## Key Ideas
- **협력(Collaboration)**:
  - 객체들이 애플리케이션 기능을 구현하기 위해 메시지를 주고받는 상호작용이다.
  - 협력은 문맥(context)을 제공하고, 책임의 집합을 결정한다.
- **책임(Responsibility)**:
  - **하는 것(doing)**: 스스로 하거나, 다른 객체의 행동을 시작시키거나, 다른 객체의 활동을 제어한다.
  - **아는 것(knowing)**: 사적인 정보를 알거나, 관련 객체를 알거나, 자신이 유도하거나 계산할 수 있는 것을 안다.
  - 책임은 외부에 제공하는 정보와 서비스의 목록이다.
- **역할(Role)**:
  - 협력 내에서 대체 가능한 책임의 집합이다.
  - 여러 객체가 동일한 역할을 수행할 수 있다.
  - 역할은 추상화를 통해 유연성을 제공한다.
- **책임 주도 설계(RDD, Responsibility-Driven Design)**:
  1. 시스템이 사용자에게 제공할 기능을 파악한다.
  2. 기능을 책임으로 변환한다.
  3. 책임을 수행할 객체를 결정한다.
  4. 객체가 다른 객체의 도움이 필요하면 협력을 설계한다.

## Trade-offs

| 관점 | 장점 | 단점 | 언제 |
|------|------|------|------|
| 데이터 중심 설계 | 초기 개발이 빠르다 | 변경에 취약하고, 책임이 분산된다 | 단순 CRUD 애플리케이션에 적합하다 |
| 책임 중심 설계 | 변경에 유연하고, 캡슐화가 강하다 | 초기 설계 비용이 높다 | 복잡한 비즈니스 로직에 적합하다 |
| 구체 클래스 사용 | 단순하고 직관적이다 | 대체가 어렵고 결합도가 높다 | 변경 가능성이 낮을 때 |
| 역할(인터페이스) 사용 | 유연하고 대체가 쉽다 | 추상화 비용이 있다 | 여러 구현이 필요하거나 대체 가능성이 있을 때 |

## Apply our Domain
- 핵심 유스케이스의 협력 다이어그램 그리기
- 각 객체의 책임을 "하는 것"과 "아는 것"으로 분류하기
- 역할로 추상화할 수 있는 부분 식별하기

## Open Questions
- 현재 협력 구조에서 책임이 적절히 분배되어 있는가?
- 하나의 객체가 너무 많은 책임을 가지고 있지 않은가?
- 역할로 추상화하여 유연성을 높일 수 있는 곳은 어디인가?
