# Ch07. 함께 모으기

## TL;DR
- 객체지향 설계는 **개념 관점, 명세 관점, 구현 관점**을 함께 고려해야 한다.
- **커피 전문점 도메인**을 통해 앞서 배운 개념들을 실제로 적용한다.
- 설계는 **협력을 먼저 설계**하고, 그 협력에 필요한 객체와 인터페이스를 정의한다.
- 구현은 **최대한 늦게** 결정하여 설계의 유연성을 유지한다.

## Key Ideas
- **세 가지 관점**:
  - 개념 관점(Conceptual Perspective): 도메인 안의 개념과 관계를 표현한다. 사용자가 도메인을 바라보는 관점
  - 명세 관점(Specification Perspective): 객체의 인터페이스를 정의한다. 객체가 "무엇을" 할 수 있는지
  - 구현 관점(Implementation Perspective): 인터페이스를 구현하는 코드 작성. 객체가 "어떻게" 수행하는지
- **커피 전문점 도메인 모델**:
  - 손님, 메뉴판, 메뉴 항목, 바리스타, 커피 등의 개념 도출
  - 각 개념의 속성과 관계 식별
- **협력 설계 과정**:
  1. 유스케이스에서 시스템 책임 파악 (커피를 주문한다)
  2. 시스템 책임을 더 작은 책임으로 분할
  3. 분할된 책임을 수행할 적절한 객체 선택
  4. 객체가 협력을 위해 다른 객체에게 메시지 전송
  5. 협력 완성 후 인터페이스 정의
- **코드와 세 가지 관점**:
  - 개념 관점: 도메인 개념이 클래스에 대응
  - 명세 관점: public 메서드가 인터페이스를 표현
  - 구현 관점: private 필드와 메서드 구현

## Trade-offs

| 관점 | 장점 | 단점 | 언제 |
|------|------|------|------|
| Bottom-up 설계 | 구체적이고 이해하기 쉽다 | 협력 맥락 없이 객체를 만들 수 있다 | 도메인이 명확할 때 |
| Top-down 설계 | 협력 중심으로 필요한 것만 만든다 | 추상적이어서 시작이 어렵다 | 대부분의 경우에 적합하다 |
| 선 설계 후 구현 | 설계 의도가 명확하다 | 피드백 루프가 길다 | 복잡한 시스템에 적합하다 |
| 점진적 설계 | 빠른 피드백을 받는다 | 전체 그림을 놓칠 수 있다 | 요구사항이 불확실할 때 |

## 설계 프로세스 요약

```
1. 도메인 모델 작성 (개념 관점)
   └── 도메인 개념과 관계 파악

2. 유스케이스 파악 (기능적 요구사항)
   └── 사용자 목표와 시나리오 정리

3. 협력 설계 (명세 관점)
   └── 메시지를 먼저 결정
   └── 메시지를 받을 객체 결정
   └── 객체의 인터페이스 정의

4. 구현 (구현 관점)
   └── 인터페이스를 만족하는 코드 작성
   └── 내부 상태와 메서드 구현
```

## Apply our Domain
- 핵심 유스케이스 하나를 선택하여 협력 설계 연습하기
- 도메인 모델 → 협력 → 인터페이스 → 구현 순서로 진행하기
- 세 가지 관점에서 코드 리뷰하기

## Open Questions
- 코드에서 도메인 개념이 명확히 드러나는가?
- 인터페이스(명세 관점)와 구현이 잘 분리되어 있는가?
- 협력 흐름이 직관적으로 이해되는가?
