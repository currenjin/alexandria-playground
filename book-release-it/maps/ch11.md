# Chapter 11 - 관측 가능성

## 한 줄 요약
메트릭·로그·트레이스 연결를 실무에서 반복 가능하게 만들면, 장애는 '예외'가 아니라 관리 가능한 이벤트가 된다.

## 핵심 개념
- 신뢰성 목표를 먼저 정하고(가용성/지연/오류율), 구현은 그 제약 안에서 결정한다.
- 장애는 단일 원인보다 **연쇄 전파**로 커진다. 전파를 끊는 경계를 먼저 만든다.
- 기술 패턴은 독립 적용보다 조합 적용이 효과적이다.

## 운영에서 보이는 실패 시그널
- 에러율 급증 이전에 p95/p99 지연이 먼저 상승한다.
- 타임아웃 미설정 구간에서 워커/스레드 고갈이 시작된다.
- 알람은 울리는데 복구 시간이 줄지 않으면 runbook 품질 문제다.

## 설계/구현 체크리스트
- [ ] 타임아웃, 재시도, 서킷브레이커 정책이 코드가 아닌 설정으로 관리되는가
- [ ] 의존성 장애 시 fallback 또는 degrade 경로가 명시되어 있는가
- [ ] SLI 3개(성공률, p95, 에러율)가 대시보드 1화면에서 연결되는가
- [ ] 알람마다 담당자/행동/복구 기준이 정의되어 있는가

## Kotlin/Spring 적용 포인트
- Resilience4j: timeout + retry + circuit breaker를 endpoint 단위로 조합한다.
- Micrometer: business tag(tenant, endpoint, result) 일관 규칙을 강제한다.
- Spring Boot Actuator: readiness/liveness 분리, 점검 실패 시 트래픽 차단을 자동화한다.

## 테스트 전략
- 단위: 정책 조합(재시도 횟수, 차단 임계치) 검증
- 통합: Testcontainers + mock server로 지연/실패 주입
- 운영 리허설: GameDay 시나리오 1개를 월 1회 반복

## 측정 지표(도입 전/후)
- MTTR: 60분 → 목표 20분
- 변경 실패율: 20% → 목표 10% 이하
- 알람 소음 비율: 40% → 목표 15% 이하

## 이번 챕터 즉시 실행 액션
1. 현재 서비스에서 가장 취약한 호출 경로 1개를 선정한다.
2. 해당 경로에 적용할 안정성 정책 3개를 문서로 고정한다.
3. 이번 주 안에 장애 주입 테스트 1회와 회고 1회를 완료한다.

## 회고 질문
- 이 챕터를 적용하면 우리 팀의 '야근형 장애 대응'을 어떤 방식으로 줄일 수 있는가?
