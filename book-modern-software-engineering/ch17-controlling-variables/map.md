# Ch17. Controlling Variables

## TL;DR
- **변수를 통제**해야 실험 결과를 신뢰할 수 있다. 여러 것을 동시에 바꾸면 원인을 알 수 없다.
- 소프트웨어에서 통제할 변수: **코드, 환경, 설정, 데이터**.
- **인프라 코드화(IaC)**, **컨테이너**, **불변 인프라**가 환경 변수를 통제하는 핵심 도구다.
- **한 번에 하나만 변경**하는 원칙이 디버깅과 실험의 기초다.

## Key Ideas
- **과학적 실험과 변수 통제**: 과학에서 대조군과 실험군을 나누듯, 소프트웨어에서도 변경 요소를 격리해야 한다.
- **환경 일관성**: "내 컴퓨터에서는 되는데"를 방지한다. Docker, Kubernetes 등으로 환경을 코드로 정의하면 어디서든 동일한 환경을 재현할 수 있다.
- **불변 인프라(Immutable Infrastructure)**: 서버를 수정하지 않고, 새 이미지를 만들어 교체한다. 설정 드리프트를 방지한다.
- **인프라 코드화(Infrastructure as Code)**: Terraform, Pulumi 등으로 인프라를 버전 관리한다. 인프라 변경도 코드 리뷰와 테스트가 가능해진다.
- **한 번에 하나만**: 코드 변경과 인프라 변경을 동시에 하면, 문제 발생 시 원인이 어디인지 모른다. 변경을 격리한다.
- **재현 가능성(Reproducibility)**: 빌드, 테스트, 배포 결과가 동일한 입력에 대해 항상 동일해야 한다.

## Trade-offs

| 선택 | 장점 | 단점 | 언제 |
|-----|-----|-----|-----|
| 불변 인프라 | 설정 드리프트 방지, 재현성 | 이미지 빌드 시간 | 프로덕션 환경 |
| 가변 인프라 | 빠른 수정 | 드리프트, 재현 어려움 | 피해야 함 |
| 컨테이너 | 환경 일관성, 이식성 | 러닝 커브 | 대부분의 상황 |
| IaC | 버전 관리, 리뷰 가능 | 초기 학습/구축 비용 | 팀/인프라가 성장할 때 |

## Open Questions
- 현재 개발 환경과 프로덕션 환경의 차이점은 무엇인가?
- 빌드/배포 결과가 항상 재현 가능한가?
