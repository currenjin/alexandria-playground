# Ch15. Deployability

## TL;DR
- **배포는 일상적이고 지루한 이벤트**여야 한다. 긴장되는 이벤트라면 뭔가 잘못된 것이다.
- **자동화된 배포 파이프라인**이 핵심이다. 수동 배포는 느리고 오류가 발생하기 쉽다.
- 배포 빈도를 높이면 각 배포의 위험이 줄어든다. **작은 변경 + 자주 배포**가 안전하다.
- 피처 플래그, 카나리 릴리즈, 블루/그린 배포로 **안전한 배포**를 구현한다.

## Key Ideas
- **배포 파이프라인**: 커밋 → 빌드 → 테스트 → 스테이징 → 프로덕션. 각 단계가 자동화된 피드백을 제공한다.
- **배포 ≠ 릴리즈**: 배포는 코드를 환경에 설치하는 것, 릴리즈는 사용자에게 기능을 공개하는 것. 피처 플래그로 분리 가능하다.
- **Continuous Delivery**: 모든 커밋이 프로덕션에 배포 가능한 상태를 유지한다. 배포 결정은 비즈니스 결정이 된다.
- **Continuous Deployment**: Continuous Delivery에서 한 걸음 더, 모든 커밋이 자동으로 프로덕션에 배포된다.
- **롤백과 롤포워드**: 문제 발생 시 이전 버전으로 돌아가거나(롤백), 빠르게 수정 배포(롤포워드). 둘 다 빠르게 가능해야 한다.
- **환경 일관성**: 개발, 스테이징, 프로덕션 환경이 동일해야 "여기서는 되는데 거기서는 안 돼"를 방지한다.

## Trade-offs

| 선택 | 장점 | 단점 | 언제 |
|-----|-----|-----|-----|
| Continuous Delivery | 항상 배포 가능, 위험 감소 | CI/CD 인프라 투자 필요 | 대부분의 상황 |
| Continuous Deployment | 최소 리드 타임 | 높은 자동화/테스트 요구 | 성숙한 팀 |
| 수동 배포 | 인프라 불필요 | 느림, 오류 빈발 | 피해야 함 |
| 카나리 릴리즈 | 위험 제한 | 인프라 복잡도 | 영향 범위 큰 변경 |
| 블루/그린 배포 | 즉시 롤백 | 리소스 2배 필요 | 무중단 배포 필요 시 |

## Open Questions
- 현재 배포 주기는 얼마인가? 일일 배포를 할 수 있는가?
- 배포 실패 시 롤백까지 걸리는 시간은?
