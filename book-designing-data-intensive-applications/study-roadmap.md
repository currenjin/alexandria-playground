# DDIA 학습 로드맵 (실무 적용형)

책 내용을 "요약"에서 끝내지 않고 시스템 설계 의사결정으로 연결하기 위한 실행 가이드입니다.

## 0. 챕터 의존관계
1. Ch01-04: 기초 품질 속성 + 데이터 모델 + 저장/인코딩
2. Ch05-09: 분산 환경에서 복제/파티셔닝/트랜잭션/합의
3. Ch10-12: 배치/스트림/파생 데이터와 아키텍처 통합

권장 순서: `1 -> 2 -> 3` (원서 순서 유지)

## 1. Phase 기반 학습 플랜
### Phase 1: Foundations
- 목표: 모델링, 인덱싱, 스키마 진화의 기본기를 실제로 검증
- 읽기: Ch01-04
- 미션: [Phase 1 미션 카드](./missions/phase-1-foundations.md)

### Phase 2: Reliability
- 목표: 복제/파티셔닝/트랜잭션에서 정합성 이슈 재현 및 완화
- 읽기: Ch05-07
- 미션: [Phase 2 미션 카드](./missions/phase-2-reliability.md)

### Phase 3: Distributed Workflows
- 목표: 분산 워크플로(Saga)에서 장애 복구 자동화
- 읽기: Ch08-09
- 미션: [Phase 3 미션 카드](./missions/phase-3-distributed-workflows.md)

### Phase 4: Streaming + Decisions
- 목표: 스트림/배치 결과를 비교하고 ADR로 의사결정 고정
- 읽기: Ch10-12
- 미션: [Phase 4 미션 카드](./missions/phase-4-streaming-and-decisions.md)

## 2. 실무 체크리스트
### 설계 리뷰 전에 확인할 것
- 평균 지연만 보고 있지 않은가? (`p95/p99` 포함 여부)
- 파티션 키가 미래 트래픽 증가에도 균등 분산되는가?
- 재시도 시 중복 쓰기를 막는 멱등 키가 있는가?
- 읽기 모델과 원천 모델 간 지연 허용치가 정의되어 있는가?
- 장애 시 수동 개입 없이 복구 가능한가? (자동 복구 경로 존재)

### 운영 중 주기적으로 점검할 것
- 복제 지연, 소비자 랙, 체크포인트 시간 추세
- 스키마 변경 실패율과 롤백 빈도
- 감사 배치에서의 불변식 위반 건수
- 재처리 작업의 성공률/소요 시간

## 3. 자주 발생하는 오해
- "Exactly-once는 설정 하나로 된다"
  - 실제로는 멱등성 + 상태 일관성 + 재처리 절차까지 필요.
- "분산 락을 넣으면 안전하다"
  - 락 서비스 장애/분할 시 역효과 가능. 락 없는 설계 우선 검토.
- "강한 일관성이 항상 정답이다"
  - 사용자 경험, 지연, 가용성 목표와 함께 균형 결정 필요.
- "이벤트 소싱을 쓰면 모든 문제가 해결된다"
  - 조회 모델/버전 진화/삭제 요구를 동시에 해결해야 실무에 맞음.

## 4. 최소 실험 과제
1. API 하나에 `Idempotency-Key`를 적용하고 중복 요청 테스트를 자동화한다.
2. CDC 이벤트를 받아 읽기 모델을 갱신하고 신선도(`freshness`)를 측정한다.
3. 소비자 재시작/리밸런싱 상황에서 중복 처리율을 측정한다.
4. 지연 이벤트를 강제로 주입해 워터마크 정책이 기대대로 동작하는지 검증한다.
5. 장애 주입(네트워크 지연, 노드 중단) 후 SLO 복구 시간을 측정한다.
