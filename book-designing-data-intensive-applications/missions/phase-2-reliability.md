# Phase 2: Reliability

목표: 복제/파티셔닝/트랜잭션에서 발생하는 정합성 문제를 재현하고 완화한다.

## Mission 2.1 - 복제와 Stale Read
- 시나리오: 읽기 트래픽을 복제본으로 분산했더니 최신 데이터가 안 보인다.
- 작업:
  - primary-replica 구성
  - read-after-write 깨지는 케이스 재현
  - 완화 전략 2개 적용 (예: 세션 고정 읽기, 최신 쓰기 직후 primary 읽기)
  - 복제 지연 모니터링
- 완료 조건:
  - stale read 재현 로그 1개 + 완화 후 재현 실패 로그 1개
  - 복제 지연 최대값과 평균값 기록
- 제출물:
  - 재현 스크립트
  - 완화 전략 비교표
  - Mission Log

## Mission 2.2 - 파티셔닝과 Hotspot
- 시나리오: 특정 인기 상품 키로 트래픽이 집중된다.
- 작업:
  - 파티션 키 후보 3개 선정
  - 해시/범위 파티셔닝 비교 실험
  - hotspot 유발 데이터 주입
  - 키 설계 개선안 적용 (예: salt, 복합 키)
- 완료 조건:
  - 파티션별 QPS 편차 지표 확보
  - 개선 전 대비 편차 또는 최대 지연이 의미 있게 감소
- 제출물:
  - 실험 스크립트
  - 파티션 분포 그래프 또는 표
  - Mission Log

## Mission 2.3 - 트랜잭션으로 불변식 보호
- 시나리오: 동시 주문으로 음수 재고가 발생한다.
- 작업:
  - 동시성 테스트로 음수 재고 버그 재현
  - 격리수준 또는 락 전략 적용
  - 재시도 정책 + 멱등 키 설계
  - 실패/중복 요청 케이스 점검
- 완료 조건:
  - 동일 부하에서 음수 재고 0건
  - 중복 요청 처리 결과가 결정적으로 동일함을 확인
- 제출물:
  - 동시성 테스트 코드
  - 트랜잭션 전략 문서
  - Mission Log

