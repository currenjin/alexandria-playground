# Phase 4: Streaming and Decisions

목표: 스트림/배치 결과를 비교하고, 수치 기반 아키텍처 결정을 문서화한다.

## Mission 4.1 - 실시간 랭킹 스트림
- 시나리오: 실시간 인기 상품 랭킹이 필요하다.
- 작업:
  - 이벤트 스트림으로 랭킹 집계
  - 윈도우 기준(예: 5분, 1시간) 2개 운영
  - 소비자 lag 모니터링
- 완료 조건:
  - 이벤트 유입 중 lag 추세 기록
  - 윈도우별 결과 차이 해석 가능
- 제출물:
  - 스트림 처리 코드/설정
  - lag 및 처리율 로그
  - Mission Log

## Mission 4.2 - 배치 재계산 정합성
- 시나리오: 스트림 결과가 장기적으로 드리프트될 수 있다.
- 작업:
  - 일/시간 단위 배치 재계산 구현
  - 스트림 결과와 배치 결과 비교
  - 오차율 기준치 정의 및 알람 조건 작성
- 완료 조건:
  - 오차율 보고서 1개 작성
  - 기준 초과 시 보정 절차 문서화
- 제출물:
  - 배치 잡 스크립트
  - 스트림 vs 배치 비교표
  - Mission Log

## Mission 4.3 - ADR 3종 작성
- 시나리오: 정확성/지연/비용이 충돌한다.
- 작업:
  - ADR 3개 작성
    - 저장소/모델 선택
    - 트랜잭션 또는 Saga 선택
    - 스트림+배치 운영 기준
  - 대안과 포기한 이유 명시
- 완료 조건:
  - ADR마다 "결정 근거(수치)" 포함
  - 최소 1개 결정에 대해 3개월 후 재검토 조건 작성
- 제출물:
  - ADR 3개
  - 최종 회고

