# Phase 3: Distributed Workflows

목표: 서비스 분리 환경에서 실패를 견디는 워크플로를 설계한다.

## Mission 3.1 - Saga 기본 흐름
- 시나리오: 주문-결제-배송이 분리되어 있고 중간 실패가 발생한다.
- 작업:
  - Saga 오케스트레이션 플로우 구현
  - 상태 전이 정의 (`PENDING -> CONFIRMED/FAILED/COMPENSATED`)
  - 타임아웃 및 재시도 정책 적용
- 완료 조건:
  - 성공/실패/타임아웃 3경로 모두 상태가 종결됨
  - 고아 상태(`PENDING` 고정) 0건
- 제출물:
  - 상태 전이 다이어그램
  - 시나리오별 실행 로그
  - Mission Log

## Mission 3.2 - 보상 트랜잭션
- 시나리오: 결제 성공 후 배송 실패로 롤백이 필요하다.
- 작업:
  - 보상 액션 정의 (결제 취소, 재고 복원 등)
  - 보상 액션 멱등성 보장
  - 부분 실패 시 재실행 정책 구현
- 완료 조건:
  - 동일 실패 이벤트 재처리 시 최종 상태 불변
  - 보상 후 핵심 불변식(결제/재고/주문 상태) 위반 0건
- 제출물:
  - 보상 로직 코드
  - 불변식 검증 결과
  - Mission Log

## Mission 3.3 - 장애 주입과 회복
- 시나리오: 네트워크 지연 또는 서비스 다운이 간헐적으로 발생한다.
- 작업:
  - 인위적 장애 주입(프로세스 kill, 지연, 오류 응답)
  - 재시도 budget, circuit breaker 또는 dead-letter 큐 적용
  - RTO/RPO 측정
- 완료 조건:
  - 장애 주입 3회 이상에서 복구 완료
  - 설정한 복구 목표(RTO/RPO) 충족 여부 기록
- 제출물:
  - 장애 주입 시나리오
  - 복구 측정 로그
  - Mission Log

